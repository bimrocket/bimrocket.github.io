<!DOCTYPE html>
<html lang="ca">
<head>
  <title>Configuració | BIMROCKET</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="BIMROCKET - The Open BIM Platform">
  <meta name="keywords" content="BIM, THREEJS, OrientDB, MongoDB">
  <meta name="theme-color" content="#404040">
  <link id="hljs-theme" rel="stylesheet" href="">

  <script>
    if (window.localStorage)
    {
      const storedTheme = window.localStorage.getItem("theme");
      if (storedTheme)
      {
        document.documentElement.setAttribute("data-theme", storedTheme);
      }
      const link = document.getElementById('hljs-theme');
      let hljsCss;
      if (storedTheme === "dark")
      {
        hljsCss = "github-dark.min.css";
      }
      else
      {
        hljsCss = "github.min.css";
      }
      link.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/" + hljsCss;
    }
  </script>

  <link rel="stylesheet" href="/assets/css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
  <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;family=Montserrat:ital,wght@0,100..900;1,100..900&amp;family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;family=Raleway:ital,wght@0,100..900;1,100..900&amp;family=Work+Sans:ital,wght@0,100..900;1,100..900&amp;display=swap" rel="stylesheet" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/yaml.min.js"></script>
</head>
<body>
  <header>
    <a href="/ca"><h1><img src="/assets/img/bimrocket.svg" alt="BIMROCKET" class="logo"></h1></a>

    <select id="lang-select" title="Selector d&#39;idioma">
      <option value="en" data-short="EN" >EN</option>
      <option value="es" data-short="ES" >ES</option>
      <option value="ca" data-short="CA" selected>CA</option>
    </select>

    <button class="image-button menu-toggle" title="menu toggler"><span class="material-symbols-outlined">menu</span></button>
    <button class="image-button theme-toggle" title="theme selector"><span class="material-symbols-outlined">dark_mode</span></button>

    <nav>
      <ul id="menu">
        <li><a href="/ca">Inici</a></li>
        <li class="submenu">
          <a href="#">Producte <span class="material-symbols-outlined">keyboard_arrow_down</span></a>
          <ul>
            <li><a href="/ca/features">Característiques</a></li>
            <li><a href="/ca/architecture">Arquitectura</a></li>
            <li><a href="/ca/license">Llicència</a></li>
          </ul>
        </li>
        <li class="submenu">
          <a href="#">Documentació <span class="material-symbols-outlined">keyboard_arrow_down</span></a>
          <ul>
            <li><a href="/ca/install">Instal·lació</a></li>
            <li><a href="/ca/configuration">Configuració</a></li>
            <li><a href="/ca/user_guides">Guies d&#39;usuari</a></li>
          </ul>
        </li>
        <li><a href="/ca/download">Baixades</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div class="content">
      
      <h2><span class="material-symbols-outlined">settings</span> Configuració</h2>
      

      <p>La configuració del servidor <strong>Bimrocket</strong> es gestiona amb la llibreria <a href="https://smallrye.io/smallrye-config">smallrye-config</a>, que segueix l’especificació <a href="https://microprofile.io/specifications/microprofile-config-2/">microprofile-config</a>. Aquesta llibreria pot obtenir paràmetres de configuració de múltiples fonts al mateix temps (variables d'entorn, propietats de la JVM, fitxers externs, etc.).
Per defecte, Bimrocket defineix aquests paràmetres en un fitxer YAML com aquest:</p>
<pre><code class="language-yaml"># bimrocket-server config

# service config
services:

  # security service
  security:
    adminPassword: bimrocket
    passwordPattern: '^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&amp;+=_\-\.])(?=\S+$).{8,}$'
    authorizationCacheTimeout: 300
    userCacheTimeout: 300
    roleCacheTimeout: 300
    ldap:
      enabled: false
      url: ldap://dc1.santfeliu.local
      domain: santfeliu.local
      searchBase: DC=santfeliu,DC=local
      adminUsername: admin
      adminPassword: changeit
    store:
      class: org.bimrocket.service.security.store.SecurityOrientDaoStore
      orient:
        database: bimdb

  # file service
  file:
    store:
      class: org.bimrocket.service.file.store.filesystem.FileSystemFileStore
      filesystem:
        directory: ${BIMROCKET_DATA_PATH}/cloudfs
    folders:
      - models
      - scripts
      - reports
      - ifc_snapshots

  # bcf service
  bcf:
    projectTemplate:
    store:
      class: org.bimrocket.service.bcf.store.BcfOrientDaoStore
      orient:
        database: bimdb
    mail:
      createTopic:
        subject: '#{project.name}##{index}: #{title} [#{priority}]'
        body: '#{description}'

  # ifcdb service
  ifcdb:
    schemas:
      - IFC2X3
      - IFC4
    maxFileSizeMb: 200
    store:
      class: org.bimrocket.service.ifcdb.store.orient.OrientIfcStore

  # task service
  task:
    taskCacheSize: 10
    store:
      class: org.bimrocket.service.task.store.orient.TaskOrientDaoStore
      orient:
        database: bimdb

  # print service
  print:
    directory: ${BIMROCKET_DATA_PATH}/printsvc
    title: 'Bimrocket print'
    creator: 'Bimrocket PrintService'

  # mail service
  mail:
    enabled: false
    host: helios
    port: 25
    startTls: false
    auth: false
    username: none
    password: none
    from: 'admin@bimrocket.org'
    contentType: 'text/plain;charset=ISO-8859-1'

  # proxy service
  proxy:
    validUrls:
      - https://api.openai.com/
      - https://api.bsdd.buildingsmart.org/
    aliases:
      chatgpt:
        url: https://api.openai.com/v1/chat/completions
        ipFilter: ''
        authorization: changeit

# database config
databases:
  bimdb:
    url: embedded:${BIMROCKET_DATA_PATH}/db/bimdb
    username: root
    password: orientdb
  IFC2X3:
    url: embedded:${BIMROCKET_DATA_PATH}/db/IFC2X3
    username: root
    password: orientdb
  IFC4:
    url: embedded:${BIMROCKET_DATA_PATH}/db/IFC4
    username: root
    password: orientdb

</code></pre>
<p>Durant l’inici del servidor, es crea (si no existeix) un fitxer de configuració YAML en aquesta ruta: <code>${BIMROCKET_DATA_PATH}/bimrocket-server.yaml</code>, on <code>${BIMROCKET_DATA_PATH}</code> apunta per defecte a <code>${user.home}/bimrocket</code>.
Edita aquest fitxer YAML per canviar els paràmetres que necessitis i reinicia el servidor Bimrocket perquè els canvis tinguin efecte.</p>
<p>El valor de <code>BIMROCKET_DATA_PATH</code> es pot modificar mitjançant una variable d'entorn o una propietat de la JVM:</p>
<ul>
<li><strong>Variable d'entorn:</strong> <code>BIMROCKET_DATA_PATH=&lt;la_meva_ubicació&gt;</code></li>
<li><strong>Propietat JVM:</strong> en instal·lacions de Tomcat, edita <code>&lt;TOMCAT_HOME&gt;/conf/catalina.properties</code> i afegeix aquesta línia: <code>BIMROCKET_DATA_PATH=&lt;la_meva_ubicació&gt;</code></li>
</ul>
<p>Per defecte, les bases de dades incrustades d’<strong>OrientDB</strong> es creen automàticament a <code>${BIMROCKET_DATA_PATH}/db</code>.
Pots canviar les URL de les bases de dades al fitxer <code>bimrocket-server.yaml</code> per crear-les en un servidor remot d’OrientDB.</p>
<p>La contrasenya per defecte de l’usuari <code>admin</code> és <code>bimrocket</code>.
Aquesta es pot canviar mitjançant la propietat <code>services.security.adminPassword</code> del fitxer <code>bimrocket-server.yaml</code>.</p>

    </div>
  </main>

  <footer>
    <p><a href="/ca">© 2025 BIMROCKET</a></p>
    <a href="https://github.com/bimrocket/bimrocket" class="github"><img src="/assets/img/github.svg" alt="github" /> GitHub</a>
  </footer>

  <button id="up-button" title="Anar amunt">
    <span class="material-symbols-outlined">arrow_upward</span>
  </button>

  <script src="/assets/js/main.js">
  </script>

  <script>hljs.highlightAll();</script>

</body>
</html>