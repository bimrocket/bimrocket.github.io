<!DOCTYPE html>
<html lang="ca">
<head>
  <title>Configuraci√≥ | BIMROCKET</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="BIMROCKET - The Open BIM Platform">
  <meta name="keywords" content="BIM, THREEJS, OrientDB, MongoDB">
  <meta name="theme-color" content="#404040">
  <link id="hljs-theme" rel="stylesheet" href="">

  <script>
    if (window.localStorage)
    {
      const storedTheme = window.localStorage.getItem("theme");
      if (storedTheme)
      {
        document.documentElement.setAttribute("data-theme", storedTheme);
      }
      const link = document.getElementById('hljs-theme');
      let hljsCss;
      if (storedTheme === "dark")
      {
        hljsCss = "github-dark.min.css";
      }
      else
      {
        hljsCss = "github.min.css";
      }
      link.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/" + hljsCss;
    }
  </script>

  <link rel="stylesheet" href="/assets/css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
  <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;family=Montserrat:ital,wght@0,100..900;1,100..900&amp;family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;family=Raleway:ital,wght@0,100..900;1,100..900&amp;family=Work+Sans:ital,wght@0,100..900;1,100..900&amp;display=swap" rel="stylesheet" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/yaml.min.js"></script>
</head>
<body>
  <header>
    <a href="/ca"><h1><img src="/assets/img/bimrocket.svg" alt="BIMROCKET" class="logo"></h1></a>

    <select id="lang-select" title="Selector d&#39;idioma">
      <option value="en" data-short="EN" >EN</option>
      <option value="es" data-short="ES" >ES</option>
      <option value="ca" data-short="CA" selected>CA</option>
    </select>

    <button class="image-button menu-toggle" title="menu toggler"><span class="material-symbols-outlined">menu</span></button>
    <button class="image-button theme-toggle" title="theme selector"><span class="material-symbols-outlined">dark_mode</span></button>

    <nav>
      <ul id="menu">
        <li><a href="/ca">Inici</a></li>
        <li class="submenu">
          <a href="#">Producte <span class="material-symbols-outlined">keyboard_arrow_down</span></a>
          <ul>
            <li><a href="/ca/features">Caracter√≠stiques</a></li>
            <li><a href="/ca/architecture">Arquitectura</a></li>
            <li><a href="/ca/license">Llic√®ncia</a></li>
          </ul>
        </li>
        <li class="submenu">
          <a href="#">Documentaci√≥ <span class="material-symbols-outlined">keyboard_arrow_down</span></a>
          <ul>
            <li><a href="/ca/install">Instal¬∑laci√≥</a></li>
            <li><a href="/ca/configuration">Configuraci√≥</a></li>
            <li><a href="/ca/user_guides">Guies d&#39;usuari</a></li>
          </ul>
        </li>
        <li><a href="/ca/download">Baixades</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div class="content">
      
      <h2><span class="material-symbols-outlined">settings</span> Configuraci√≥</h2>
      

      <p>La configuraci√≥ del servidor <strong>Bimrocket</strong> es gestiona amb la llibreria <a href="https://smallrye.io/smallrye-config">smallrye-config</a>, que segueix l‚Äôespecificaci√≥ <a href="https://microprofile.io/specifications/microprofile-config-2/">microprofile-config</a>. Aquesta llibreria pot obtenir par√†metres de configuraci√≥ de m√∫ltiples fonts al mateix temps (variables d'entorn, propietats de la JVM, fitxers externs, etc.).
Per defecte, Bimrocket defineix aquests par√†metres en un fitxer YAML com aquest:</p>
<pre><code class="language-yaml"># bimrocket-server config

# service config
services:

  # security service
  security:
    adminPassword: bimrocket
    passwordPattern: '^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&amp;+=_\-\.])(?=\S+$).{8,}$'
    authorizationCacheTimeout: 300
    userCacheTimeout: 300
    roleCacheTimeout: 300
    ldap:
      enabled: false
      url: ldap://dc1.santfeliu.local
      domain: santfeliu.local
      searchBase: DC=santfeliu,DC=local
      adminUsername: admin
      adminPassword: changeit
    store:
      class: org.bimrocket.service.security.store.orient.SecurityOrientDaoStore
      orient:
        database: bimdb

  # file service
  file:
    store:
      class: org.bimrocket.service.file.store.filesystem.FileSystemFileStore
      filesystem:
        directory: ${BIMROCKET_DATA_PATH}/cloudfs
    folders:
      - models
      - scripts
      - reports
      - ifc_snapshots

  # bcf service
  bcf:
    projectTemplate:
    store:
      class: org.bimrocket.service.bcf.store.orient.BcfOrientDaoStore
      orient:
        database: bimdb
    mail:
      createTopic:
        subject: '#{project.name}##{index}: #{title} [#{priority}]'
        body: '#{description}'

  # ifcdb service
  ifcdb:
    schemas:
      - IFC2X3
      - IFC4
    maxFileSizeMb: 200
    store:
      class: org.bimrocket.service.ifcdb.store.orient.OrientIfcStore

  # task service
  task:
    taskCacheSize: 10
    store:
      class: org.bimrocket.service.task.store.orient.TaskOrientDaoStore
      orient:
        database: bimdb

  # print service
  print:
    directory: ${BIMROCKET_DATA_PATH}/printsvc
    title: 'Bimrocket print'
    creator: 'Bimrocket PrintService'

  # mail service
  mail:
    enabled: false
    host: helios
    port: 25
    startTls: false
    auth: false
    username: none
    password: none
    from: 'admin@bimrocket.org'
    contentType: 'text/plain;charset=ISO-8859-1'

  # proxy service
  proxy:
    validUrls:
      - https://api.openai.com/
      - https://api.bsdd.buildingsmart.org/
    aliases:
      chatgpt:
        url: https://api.openai.com/v1/chat/completions
        ipFilter: ''
        authorization: changeit

# database config
databases:
  bimdb:
    url: embedded:${BIMROCKET_DATA_PATH}/db/bimdb
    username: root
    password: orientdb
  IFC2X3:
    url: embedded:${BIMROCKET_DATA_PATH}/db/IFC2X3
    username: root
    password: orientdb
  IFC4:
    url: embedded:${BIMROCKET_DATA_PATH}/db/IFC4
    username: root
    password: orientdb

</code></pre>
<p>Durant l‚Äôinici del servidor, es crea (si no existeix) un fitxer de configuraci√≥ YAML en aquesta ruta: <code>${BIMROCKET_DATA_PATH}/bimrocket-server.yaml</code>, on <code>${BIMROCKET_DATA_PATH}</code> apunta per defecte a <code>${user.home}/bimrocket</code>.
Edita aquest fitxer YAML per canviar els par√†metres que necessitis i reinicia el servidor Bimrocket perqu√® els canvis tinguin efecte.</p>
<p>El valor de <code>BIMROCKET_DATA_PATH</code> es pot modificar mitjan√ßant una variable d'entorn o una propietat de la JVM:</p>
<ul>
<li><strong>Variable d'entorn:</strong> <code>BIMROCKET_DATA_PATH=&lt;la_meva_ubicaci√≥&gt;</code></li>
<li><strong>Propietat JVM:</strong> en instal¬∑lacions de Tomcat, edita <code>&lt;TOMCAT_HOME&gt;/conf/catalina.properties</code> i afegeix aquesta l√≠nia: <code>BIMROCKET_DATA_PATH=&lt;la_meva_ubicaci√≥&gt;</code></li>
</ul>
<p>En la configuraci√≥ per defecte, <strong>Bimrocket</strong> crea autom√†ticament bases de dades incrustades d‚Äô<strong>OrientDB</strong> en la ruta <code>${BIMROCKET_DATA_PATH}/db</code>.
Pots canviar les URL de les bases de dades al fitxer <code>bimrocket-server.yaml</code> per crear-les en un servidor remot d‚ÄôOrientDB.</p>
<p>La contrasenya per defecte de l‚Äôusuari <code>admin</code> √©s <code>bimrocket</code>.
Aquesta es pot canviar mitjan√ßant la propietat <code>services.security.adminPassword</code> del fitxer <code>bimrocket-server.yaml</code>.</p>
<h3>Par√†metres de configuraci√≥ dels serveis</h3>
<p>A continuaci√≥ es descriuen els par√†metres de configuraci√≥ que accepta cada servei.
Aquests par√†metres es poden modificar directament al fitxer <code>bimrocket-server.yaml</code> o b√© mitjan√ßant qualsevol altre mecanisme previst per la
llibreria <em>smallrye config</em> (propietats d‚Äôentorn, variables de la JVM, etc.).
En molts casos, √©s necessari reiniciar els serveis perqu√® els canvis de configuraci√≥ tinguin efecte.</p>
<h4 id="security">SecurityService
  <a href="#security" class="anchor">üîó</a>
</h4>
<p>Servei que gestiona la informaci√≥ dels usuaris i els rols d‚Äôacc√©s.<br>
Ruta base: <code>services.security</code></p>
<ul>
<li><code>.adminPassword</code> {String}: Contrasenya de l‚Äôusuari <code>admin</code>. Aquest usuari t√© privilegis totals sobre tots els serveis.</li>
<li><code>.passwordPattern</code> {String}: Expressi√≥ regular de Java que determina el format acceptat de les contrasenyes dels usuaris.</li>
<li><code>.authorizationCacheTimeout</code> {Long}: Temps de refresc (en segons) de la mem√≤ria cau d‚Äôautoritzaci√≥.</li>
<li><code>.userCacheTimeout</code> {Long}: Temps de refresc (en segons) de la mem√≤ria cau d‚Äôusuaris.</li>
<li><code>.roleCacheTimeout</code> {Long}: Temps de refresc (en segons) de la mem√≤ria cau de rols.</li>
<li><code>.ldap.enabled</code> {Boolean}: Par√†metre que indica si les contrasenyes dels usuaris es validen contra un servidor LDAP.
Quan aquest par√†metre est√† activat, no √©s necessari que els usuaris es cre√Øn a la base de dades.</li>
<li><code>.ldap.url</code> {String}: URL del servidor LDAP.</li>
<li><code>.ldap.domain</code> {String}: Domini del servidor LDAP.</li>
<li><code>.ldap.searchBase</code> {String}: Ruta base del directori LDAP on es busquen els usuaris.</li>
<li><code>.ldap.adminUsername</code> {String}: Usuari per accedir al servidor LDAP.</li>
<li><code>.ldap.adminPassword</code> {String}: Contrasenya per accedir al servidor LDAP.</li>
<li><code>.store.class</code> {Class}: Classe que implementa l‚Äôemmagatzematge dels usuaris i rols:
<ul>
<li>Per a l‚Äôemmagatzematge a OrientDB: <code>org.bimrocket.service.security.store.orient.SecurityOrientDaoStore</code></li>
<li>Per a l‚Äôemmagatzematge a MongoDB: <code>org.bimrocket.service.security.store.mongo.SecurityMongoDaoStore</code></li>
</ul>
</li>
<li><code>.store.orient.database</code> {String}: √Älies de la base de dades OrientDB que es defineix a la secci√≥ <code>databases</code>.</li>
<li><code>.store.mongo.database</code> {String}: √Älies de la base de dades MongoDB que es defineix a la secci√≥ <code>databases</code>.</li>
</ul>
<h4 id="file">FileService
  <a href="#file" class="anchor">üîó</a>
</h4>
<p>Servei que gestiona l‚Äôemmagatzematge de fitxers i carpetes.<br>
Ruta base: <code>services.file</code></p>
<ul>
<li><code>.folders</code> {List&lt;String&gt;}: Llista de carpetes a crear al directori base del servei.</li>
<li><code>.store</code> {Class}: Classe que implementa l‚Äôemmagatzematge de carpetes i fitxers:
<ul>
<li>Per a l‚Äôemmagatzematge al sistema de fitxers: <code>org.bimrocket.service.file.store.filesystem.FileSystemFileStore</code></li>
</ul>
</li>
<li><code>.store.filesystem.directory</code> {String}: Directori base on s‚Äôemmagatzemen les carpetes i els fitxers.</li>
</ul>
<h4 id="bcf">BcfService
  <a href="#bcf" class="anchor">üîó</a>
</h4>
<p>Servei que gestiona l‚Äôemmagatzematge d‚Äôincid√®ncies BCF.<br>
Ruta base: <code>services.bcf</code></p>
<ul>
<li><code>.projectTemplate</code> {String}: Nom del projecte que es pren com a plantilla.
En crear un nou projecte BCF, aquest heretar√† les extensions (<em>BcfExtensions</em>) del projecte plantilla.</li>
<li><code>.store</code> {Class}: Classe que implementa l‚Äôemmagatzematge de les incid√®ncies BCF:
<ul>
<li>Per a l‚Äôemmagatzematge a OrientDB: <code>org.bimrocket.service.bcf.store.orient.BcfOrientDaoStore</code></li>
<li>Per a l‚Äôemmagatzematge a MongoDB: <code>org.bimrocket.service.bcf.store.mongo.BcfMongoDaoStore</code></li>
</ul>
</li>
<li><code>.store.orient.database</code>: √Älies de la base de dades OrientDB que es defineix a la secci√≥ <code>databases</code>.</li>
<li><code>.store.mongo.database</code>: √Älies de la base de dades MongoDB que es defineix a la secci√≥ <code>databases</code>.</li>
<li><code>.mail.createTopic.subject</code> {String}: Patr√≥ que determina l‚Äôassumpte del missatge que s‚Äôenviar√† als participants
de la incid√®ncia en el moment de la seva creaci√≥. El patr√≥ pot incloure expressions <code>#{&lt;property&gt;}</code> on <code>property</code> √©s qualsevol propietat del <em>Topic</em> (incid√®ncia).</li>
<li><code>.mail.createTopic.body</code> {String}: Patr√≥ que determina el cos del missatge que s‚Äôenviar√† als
participants de la incid√®ncia en el moment de la seva creaci√≥. El patr√≥ pot incloure expressions <code>#{&lt;property&gt;}</code> on <code>property</code> √©s qualsevol propietat del <em>Topic</em> (incid√®ncia).</li>
</ul>
<h4 id="ifcdb">IfcdbService
  <a href="#ifcdb" class="anchor">üîó</a>
</h4>
<p>Servei que gestiona l‚Äôemmagatzematge d‚Äôobjectes d‚Äôun model IFC en una base de dades.<br>
Ruta base: <code>services.ifcdb</code></p>
<ul>
<li><code>.schemas</code> {List&lt;String&gt;}: Llista d‚Äôesquemes IFC suportats (IFC2X3, IFC4 o IFC4X3_ADD2).
Per a cada esquema es crear√† una base de dades diferent.
L‚Äô<code>√†lies</code> de la base de dades utilitzada coincidir√† amb el nom de l‚Äôesquema IFC.</li>
<li><code>.maxFileSizeMb</code> {Integer}: Mida m√†xima en MB dels models IFC que es poden emmagatzemar a la base de dades.</li>
<li><code>.store</code> {Class}: Classe que determina la implementaci√≥ de l‚Äôemmagatzematge dels models:
<ul>
<li>Per a l‚Äôemmagatzematge a OrientDB: <code>org.bimrocket.service.ifcdb.store.orient.OrientIfcStore</code></li>
<li>Per a l‚Äôemmagatzematge a MongoDB: <code>org.bimrocket.service.ifcdb.store.mongo.MongoIfcStore</code></li>
</ul>
</li>
</ul>
<h4 id="task">TaskService
  <a href="#task" class="anchor">üîó</a>
</h4>
<p>Servei que gestiona l‚Äôexecuci√≥ de tasques al servidor.<br>
Ruta base: <code>services.task</code></p>
<ul>
<li><code>.taskCacheSize</code> {Integer}: Nombre de tasques que es desen en mem√≤ria cau amb una estructura LRU.</li>
<li><code>.store.class</code> {Class}: Classe que determina la implementaci√≥ de l‚Äôemmagatzematge de les dades de les tasques:
<ul>
<li>Per a l‚Äôemmagatzematge a OrientDB: <code>org.bimrocket.service.task.store.orient.TaskOrientDaoStore</code></li>
<li>Per a l‚Äôemmagatzematge a MongoDB: <code>org.bimrocket.service.task.store.mongo.TaskMongoDaoStore</code></li>
</ul>
</li>
<li><code>.store.orient.database</code> {String}: √Älies de la base de dades OrientDB que es defineix a la secci√≥ <code>databases</code>.</li>
<li><code>.store.mongo.database</code> {String}: √Älies de la base de dades MongoDB que es defineix a la secci√≥ <code>databases</code>.</li>
</ul>
<h4 id="proxy">ProxyService
  <a href="#proxy" class="anchor">üîó</a>
</h4>
<p>Servei per accedir a URL externes.<br>
Ruta base: <code>services.proxy</code></p>
<ul>
<li><code>.validUrls</code> {List&lt;String&gt;}: Llista de les URLs acceptades pel servidor <em>proxy</em>.</li>
<li><code>.aliases.&lt;alias&gt;</code> {Object}: Definici√≥ d‚Äôuna connexi√≥ externa associada a <code>alias</code>.</li>
<li><code>.aliases.&lt;alias&gt;.url</code> {String}: URL externa a la qual es vol accedir.</li>
<li><code>.aliases.&lt;alias&gt;.ipFilter</code> {String}: Expressi√≥ regular de Java que determina quines adreces IP poden accedir a la URL.</li>
<li><code>.aliases.&lt;alias&gt;.authorization</code> {String}: Cap√ßalera HTTP <em>Authorization</em> que s‚Äôenviar√† en accedir a la URL (Bearer o Basic).</li>
</ul>
<h4 id="mail">MailService
  <a href="#mail" class="anchor">üîó</a>
</h4>
<p>Servei per enviar correus electr√≤nics.<br>
Ruta base: <code>services.mail</code></p>
<ul>
<li><code>.enabled</code> {Boolean}: Par√†metre que controla l‚Äôactivaci√≥ del servei.</li>
<li><code>.host</code> {String}: Nom del servidor de correu SMTP.</li>
<li><code>.port</code> {Integer}: Port d‚Äôescolta del servidor de correu.</li>
<li><code>.startTls</code> {Boolean}: Par√†metre que controla l‚Äô√∫s del protocol TLS.</li>
<li><code>.auth</code> {Boolean}: Par√†metre que indica si la connexi√≥ s‚Äôestableix passant credencials.</li>
<li><code>.username</code> {String}: Nom de l‚Äôusuari que s‚Äôautentica al servidor.</li>
<li><code>.password</code> {String}: Contrasenya de l‚Äôusuari que s‚Äôautentica al servidor.</li>
<li><code>.from</code> {String}: Adre√ßa de correu del remitent per defecte.</li>
<li><code>.contentType</code> {String}: <em>Content-Type</em> del cos del missatge.</li>
</ul>
<h4 id="print">PrintService
  <a href="#print" class="anchor">üîó</a>
</h4>
<p>Servei per generar fitxers PDF amb geometries vectorials.<br>
Ruta base: <code>services.print</code></p>
<ul>
<li><code>.directory</code> {String}: Directori on s‚Äôemmagatzemen els fitxers PDF generats.</li>
<li><code>.title</code> {String}: T√≠tol que es mostrar√† al document PDF.</li>
<li><code>.creator</code> {String}: Propietat <code>creator</code> que s‚Äôincorporar√† al document PDF.</li>
</ul>

    </div>
  </main>

  <footer>
    <p><a href="/ca">¬© 2025 BIMROCKET</a></p>
    <a href="https://github.com/bimrocket/bimrocket" class="github"><img src="/assets/img/github.svg" alt="github" /> GitHub</a>
  </footer>

  <button id="up-button" title="Anar amunt">
    <span class="material-symbols-outlined">arrow_upward</span>
  </button>

  <script src="/assets/js/main.js">
  </script>

  <script>hljs.highlightAll();</script>

</body>
</html>